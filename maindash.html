<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>National Disaster Management Platform - Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        /* CSS Start*/
    
        body {
            background-color: #f0f4f8;
            font-family: Arial, sans-serif;
        }
        .navbar-gov {
            background-color: #003366;
        }
        .emblem-logo {
            max-height: 50px;
            margin-right: 10px;
        }
        .header-logo {
            max-height: 50px;
            margin: 0 10px;
        }
        .header-container {
            position: relative;
        }
        .header-left-logo {
            position: absolute;
            height: 100px;
            width: 100px;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
        }
        .header-right-logo {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        /* Consistent Card Styling */
        .card-gov, .dashboard-card {
            height: 100%;
            display: flex;
            flex-direction: column;
            border: 2px solid #003366;
            border-radius: 8px;
            background-color: #f8f9fa;
            transition: background-color 0.3s ease, transform 0.2s ease-in-out;
        }
        
        .card-gov:hover, .dashboard-card:hover {
            background-color: #e9ecef;
            transform: translateY(-3px);
        }
        
        .card-gov .card-header, .dashboard-card .card-body {
            text-align: center;
            padding: 15px;
        }
        
        .card-gov .card-header {
            background-color: #003366;
            color: white;
            font-weight: bold;
        }
        
        .dashboard-card .feature-icon {
            font-size: 2.5rem;
            color: #003366;
            margin-bottom: 10px;
        }
        
        .dashboard-card .card-title {
            font-size: 1.2rem;
            color: #003366;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .dashboard-card .card-text, 
        .card-gov .card-body p {
            font-size: 0.9rem;
            color: #333;
        }
        
        .card-gov .card-body h3 {
            font-size: 1.5rem;
            color: #003366;
            font-weight: bold;
        }
        
        /* SOS Button Styles */
        .sos-container {
            position: fixed;
            bottom: 80px;
            right: 30px;
            z-index: 1000;
        }
        
        .sos-button {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: #dc3545;
            border: 8px solid #fff;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            cursor: pointer;
            animation: pulse 2s infinite;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .sos-button:hover {
            transform: scale(1.05) rotate(5deg);
            background-color: #c82333;
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }
        
        .sos-button:active {
            transform: scale(0.95);
            background-color: #bd2130;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
            }
            50% {
                box-shadow: 0 0 0 15px rgba(220, 53, 69, 0.4);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
            }
        }
        
        .sos-section {
            background-color: #ffeeee;
            border: 2px solid #dc3545;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        /* Chatbot Styles */
        .chatbot-widget {
            position: fixed;
            bottom: 80px;
            left: 30px;
            z-index: 999;
        }
        
        .chatbot-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #003366;
            border: none;
            color: white;
            font-size: 1.8rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .chatbot-button:hover {
            background-color: #004080;
            transform: scale(1.05);
        }
        
        .chatbot-panel {
            display: none;
            position: fixed;
            bottom: 150px;
            left: 30px;
            width: 350px;
            height: 450px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 998;
            overflow: hidden;
        }
        
        .chatbot-header {
            background-color: #003366;
            color: white;
            padding: 15px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
        }
        
        .chatbot-body {
            height: 340px;
            padding: 15px;
            overflow-y: auto;
            background-color: #f5f7fa;
        }
        
        .chatbot-input-area {
            display: flex;
            padding: 10px;
            border-top: 1px solid #ddd;
        }
        
        .chatbot-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 20px;
            margin-right: 10px;
        }
        
        .chatbot-send {
            background-color: #003366;
            color: white;
            border: none;
            border-radius: 50%;
            width: 38px;
            height: 38px;
            cursor: pointer;
        }
          /* CSS End*/
        
    </style>
</head>
<body>
    <div class="container-fluid bg-light py-2 text-center header-container">
        <img src="./image/ndma.jpg" alt="NDMA Logo" class="header-logo header-left-logo">
        <img src="./image/image1.jpg" alt="Emblem of India" class="emblem-logo">
        <span class="h4 text-dark">भारत सरकार | Government of India</span>
        <img src="./image/azadi.jpg" alt="Home Ministry Logo" class="header-logo header-right-logo">
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark navbar-gov">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="bi bi-shield-fill me-2"></i>National Disaster Management Platform
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="maindash.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="organization.html">Partner Organizations</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="disasterzones.html">Disaster Zones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="emergecycont.html">Emergency Contacts</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="volunteer_login.html">Volunteer Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">Agency Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12">
                <div class="card national-highlight mb-4">
                    <div class="card-body">
                        <h2 class="card-title">National Disaster Management Dashboard</h2>
                        <p class="card-text">Comprehensive real-time platform providing critical insights, emergency alerts, and coordinated response mechanisms for effective disaster management across the nation, ensuring swift and strategic interventions.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SOS Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card sos-section">
                    <div class="card-body p-4">
                        <div class="row align-items-center">
                            <div class="col-md-3 text-center">
                                <div style="font-size: 5rem; color: #dc3545;">🆘</div>
                            </div>
                            <div class="col-md-9">
                                <h2 class="text-danger mb-3">Emergency SOS Assistance</h2>
                                <p class="lead">Press the SOS button for immediate emergency assistance during critical situations:</p>
                                <ul class="list-unstyled">
                                    <li><i class="bi bi-fire me-2 text-danger"></i> Fire emergencies requiring immediate intervention</li>
                                    <li><i class="bi bi-car-front me-2 text-danger"></i> Vehicle accidents or being trapped in vehicles</li>
                                    <li><i class="bi bi-water me-2 text-danger"></i> Flash floods or being stranded in water-logged areas</li>
                                    <li><i class="bi bi-building me-2 text-danger"></i> Building collapses or being trapped under debris</li>
                                    <li><i class="bi bi-heart-pulse me-2 text-danger"></i> Medical emergencies in disaster-affected areas</li>
                                </ul>
                                <p class="text-muted mt-2"><small>Your location will be automatically shared with emergency responders when you press the SOS button.</small></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card card-gov">
                    <div class="card-header">Active Disaster Zones</div>
                    <div class="card-body">
                        <h3>12</h3>
                        <p>Currently monitored disaster-affected regions requiring immediate strategic intervention and emergency support.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card card-gov">
                    <div class="card-header">Population Impacted</div>
                    <div class="card-body">
                        <h3>4,75,300</h3>
                        <p>Individuals across multiple regions requiring comprehensive emergency assistance and rapid rehabilitation support.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card card-gov">
                    <div class="card-header">Relief Organizations</div>
                    <div class="card-body">
                        <h3>56</h3>
                        <p>Government and NGO teams collaboratively providing integrated relief, rescue, and rehabilitation services nationwide.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card dashboard-card h-100">
                    <div class="card-body">
                        <div class="feature-icon">⚠</div>
                        <h3 class="card-title">Disaster Alerts</h3>
                        <p class="card-text">Receive comprehensive real-time disaster warnings, critical notifications, and official alerts from the National Disaster Management Authority, ensuring timely public awareness and preparedness.</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card dashboard-card h-100">
                    <div class="card-body">
                        <div class="feature-icon">🚑</div>
                        <h3 class="card-title">Emergency Response Teams</h3>
                        <p class="card-text">Monitor and track active specialized response teams deployed for immediate rescue operations, medical support, and comprehensive relief efforts across affected regions and areas.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card dashboard-card h-100">
                    <div class="card-body">
                        <div class="feature-icon">🏠</div>
                        <h3 class="card-title">Evacuation Centers</h3>
                        <p class="card-text">Access comprehensive information about government-approved emergency shelters, providing safe refuges for displaced citizens with essential amenities and support services.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card dashboard-card h-100">
                    <div class="card-body">
                        <div class="feature-icon">📊</div>
                        <h3 class="card-title">Disaster Risk Assessment</h3>
                        <p class="card-text">Advanced geospatial analysis of high-risk zones, vulnerability mapping, and predictive modeling to enhance strategic disaster preparedness and mitigation planning.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card dashboard-card h-100">
                    <div class="card-body">
                        <div class="feature-icon">📜</div>
                        <h3 class="card-title">Government Policies</h3>
                        <p class="card-text">Comprehensive repository of updated government disaster management regulations, legal frameworks, and emergency response guidelines for comprehensive national resilience.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card dashboard-card h-100">
                    <div class="card-body">
                        <div class="feature-icon">📄</div>
                        <h3 class="card-title">Disaster Reports</h3>
                        <p class="card-text">Detailed analytical reports documenting recent disaster incidents, comprehensive damage assessments, and strategic government response mechanisms.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card dashboard-card h-100">
                    <div class="card-body">
                        <div class="feature-icon">🤝</div>
                        <h3 class="card-title">Citizen Participation</h3>
                        <p class="card-text">Empowering citizens through structured engagement programs, training modules, and collaborative platforms for effective disaster relief and community resilience initiatives.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card dashboard-card h-100">
                    <div class="card-body">
                        <div class="feature-icon">📅</div>
                        <h3 class="card-title">Disaster Drills</h3>
                        <p class="card-text">Comprehensive schedules of upcoming emergency preparedness mock drills, community training exercises, and strategic response simulations across different regions.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card dashboard-card h-100">
                    <div class="card-body">
                        <div class="feature-icon">💰</div>
                        <h3 class="card-title">Relief Fund Allocation</h3>
                        <p class="card-text">Transparent tracking of government disaster relief fund distribution, detailing strategic resource allocation for immediate assistance and long-term rehabilitation.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chatbot Assistant Information Section -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card" style="border: 2px solid #003366; border-radius: 10px;">
                    <div class="card-body p-4">
                        <div class="row align-items-center">
                            <div class="col-md-3 text-center">
                                <div style="font-size: 5rem; color: #003366;">🤖</div>
                            </div>
                            <div class="col-md-9">
                                <h2 class="text-primary mb-3">24/7 Disaster Management Assistant</h2>
                                <p class="lead">Our AI-powered disaster management assistant is available 24/7 to provide critical information and guidance:</p>
                                <div class="row mt-3">
                                    <div class="col-md-6">
                                        <ul class="list-unstyled">
                                            <li><i class="bi bi-check-circle-fill me-2 text-success"></i> Get real-time disaster updates</li>
                                            <li><i class="bi bi-check-circle-fill me-2 text-success"></i> Find nearest evacuation centers</li>
                                            <li><i class="bi bi-check-circle-fill me-2 text-success"></i> Receive emergency protocols</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <ul class="list-unstyled">
                                            <li><i class="bi bi-check-circle-fill me-2 text-success"></i> Access emergency contact numbers</li>
                                            <li><i class="bi bi-check-circle-fill me-2 text-success"></i> Request specific disaster guidance</li>
                                            <li><i class="bi bi-check-circle-fill me-2 text-success"></i> Report disaster incidents</li>
                                        </ul>
                                    </div>
                                </div>
                                <p class="text-muted mt-3"><small>Click the chat icon in the bottom left corner to start a conversation with our assistant.</small></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SOS Floating Button -->
    <form action="https://api.web3forms.com/submit" method="POST">
        <input type="hidden" name="access_key" value="c4936e92-1659-45bf-b364-7836cabe9a40">
        <input type="hidden" name="action" value="approve">
    <div class="sos-container">
      
           
            <button type="submit" class="sos-button" onclick="alert('Emergency alert sent! Responders have been notified of your location. Please stay on the line.')">SOS</button>

    </div>
</form>
    <!-- Chatbot Widget -->
    <div class="chatbot-widget">
        <button class="chatbot-button" onclick="toggleChatbot()">
            <i class="bi bi-chat-dots-fill"></i>
        </button>
    </div>

    <!-- Chatbot Panel -->
    <div id="chatbotPanel" class="chatbot-panel">
        <div class="chatbot-header">
            <span>Disaster Management Assistant</span>
            <span style="cursor: pointer" onclick="toggleChatbot()">×</span>
        </div>
        <div class="chatbot-body" id="chatbotBody">
            <div style="background-color: #e6f2ff; padding: 10px; border-radius: 10px; margin-bottom: 10px;">
                <strong>Disaster Assistant:</strong> Hello! I'm your 24/7 Disaster Management Assistant. How can I help you today?
            </div>
        </div>
        <div class="chatbot-input-area">
            <input type="text" class="chatbot-input" placeholder="Type your question here..." id="chatInput" onkeypress="if(event.key==='Enter')sendMessage()">
            <button class="chatbot-send" onclick="sendMessage()">
                <i class="bi bi-send-fill"></i>
            </button>
        </div>
    </div>

    <footer class="bg-dark text-white text-center py-4 mt-4">
        <div class="container">
             <p>© 2024 National Disaster Management Platform, Government of India</p>
        <p>Developed by Team ByteSquad in Code Urja 1.0 Hackathon</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Disaster Management Chatbot - Knowledge Base
        const disasterResponses = {
            // General queries
            "hello": "Hello! I'm the NDMS Assistant. How can I help you with disaster management information today?",
            "hi": "Hi there! I'm the NDMS Assistant. How can I help you with disaster management today?",
            "help": "I can help you with disaster alerts, evacuation center information, emergency contacts, safety protocols, and more. What specific information do you need?",
            
            // Disaster types
            "flood": "For flood emergencies: 1) Move to higher ground immediately 2) Avoid walking or driving through floodwater 3) Follow evacuation orders 4) Call the emergency helpline at 112 if you're trapped. Would you like to know about nearby evacuation centers?",
            "earthquake": "For earthquakes: 1) DROP to the ground 2) COVER by getting under sturdy furniture 3) HOLD ON until shaking stops 4) Stay away from windows and exterior walls 5) If outdoors, move to an open area away from buildings. Need more specific information?",
            "fire": "For fire emergencies: 1) Evacuate immediately - don't collect belongings 2) If smoke is present, stay low 3) Check doors for heat before opening 4) Call 101 for Fire Department assistance 5) Use stairs, not elevators. Do you need evacuation guidance?",
            "cyclone": "For cyclone safety: 1) Follow evacuation orders immediately 2) If staying home, move to the strongest room 3) Stay away from windows 4) Have emergency supplies ready 5) Keep monitoring official alerts. Would you like information on current cyclone warnings?",
            "landslide": "For landslide safety: 1) Evacuate immediately if advised 2) Watch for signs like tilting trees or sudden changes in water levels 3) Move away from the path of the landslide 4) Contact emergency services at 112. Do you need information on landslide-prone areas?",
            
            // Resources
            "evacuation": "Evacuation centers are currently operational in the following areas: Delhi (15), Mumbai (23), Chennai (18), Kolkata (12), and other major cities. I can help you locate the nearest center based on your location. Would you like specific center information?",
            "shelter": "Government shelters provide food, water, medical assistance, sanitation facilities, and security. To find the nearest shelter, please share your current location or district name.",
            "emergency contacts": "Key emergency numbers: National Emergency Response: 112, Fire: 101, Ambulance: 108, Police: 100, Disaster Management Helpline: 1078. You can also reach NDRF at 9711077372. Do you need specific regional contact information?",
            "ndrf": "The National Disaster Response Force (NDRF) currently has 56 teams deployed across active disaster zones. For NDRF assistance, contact: 011-24363260 or 9711077372.",
            "medical": "For medical emergencies in disaster zones, call 108 for ambulance services. Medical camps are established at all major evacuation centers with essential medicines and first aid. If you need specific medical assistance, please provide details.",
            
            // Current situations
            "active disasters": "There are currently 12 active disaster zones being monitored, including floods in Assam and Bihar, cyclone aftermath in Odisha, and landslides in Himachal Pradesh. Which area are you specifically concerned about?",
            "alerts": "Current alerts: 1) Severe flooding warning for eastern Uttar Pradesh 2) Cyclone warning for Tamil Nadu coast 3) Heatwave conditions in Central India 4) Heavy rainfall expected in Western Ghats region. Do you need details on any specific alert?",
            
            // Safety tips
            "preparedness": "Disaster preparedness essentials: 1) Create an emergency plan with your family 2) Prepare an emergency kit with food, water, medicine, documents 3) Know evacuation routes 4) Keep emergency contacts handy 5) Stay informed through official channels. Would you like specific preparedness tips?",
            "emergency kit": "Your emergency kit should include: Drinking water, non-perishable food, first aid supplies, medications, flashlight, battery-powered radio, batteries, important documents, cash, clothing, and hygiene items. Aim to be self-sufficient for at least 72 hours.",
            "safety": "General safety during disasters: 1) Follow official instructions 2) Have emergency contacts ready 3) Keep emergency kit accessible 4) Plan meeting points with family 5) Know how to shut off utilities. What specific safety information do you need?",
            
            // Default response
            "default": "I understand you're asking about disaster management. To provide the most helpful information, could you please be more specific about what you need help with? I can assist with emergency protocols, evacuation information, current alerts, or safety guidelines."
        };
    
        // Function to find best matching response
        function findBestResponse(userInput) {
            userInput = userInput.toLowerCase();
            
            // Check for exact matches first
            for (const key in disasterResponses) {
                if (userInput.includes(key)) {
                    return disasterResponses[key];
                }
            }
            
            // Check for disaster-related keywords
            if (userInput.includes("flood") || userInput.includes("water") || userInput.includes("submerged")) {
                return disasterResponses["flood"];
            } else if (userInput.includes("earthquake") || userInput.includes("tremor") || userInput.includes("shaking")) {
                return disasterResponses["earthquake"];
            } else if (userInput.includes("fire") || userInput.includes("burning") || userInput.includes("smoke")) {
                return disasterResponses["fire"];
            } else if (userInput.includes("cyclone") || userInput.includes("hurricane") || userInput.includes("storm") || userInput.includes("typhoon")) {
                return disasterResponses["cyclone"];
            } else if (userInput.includes("landslide") || userInput.includes("mudslide") || userInput.includes("rockfall")) {
                return disasterResponses["landslide"];
            } else if (userInput.includes("evacuate") || userInput.includes("evacuation") || userInput.includes("leave area")) {
                return disasterResponses["evacuation"];
            } else if (userInput.includes("shelter") || userInput.includes("camp") || userInput.includes("refuge")) {
                return disasterResponses["shelter"];
            } else if (userInput.includes("contact") || userInput.includes("phone") || userInput.includes("number") || userInput.includes("hotline")) {
                return disasterResponses["emergency contacts"];
            } else if (userInput.includes("ndrf") || userInput.includes("response force") || userInput.includes("rescue team")) {
                return disasterResponses["ndrf"];
            } else if (userInput.includes("medical") || userInput.includes("hospital") || userInput.includes("doctor") || userInput.includes("medicine")) {
                return disasterResponses["medical"];
            } else if (userInput.includes("alert") || userInput.includes("warning") || userInput.includes("notice")) {
                return disasterResponses["alerts"];
            } else if (userInput.includes("prepare") || userInput.includes("readiness") || userInput.includes("ready")) {
                return disasterResponses["preparedness"];
            } else if (userInput.includes("kit") || userInput.includes("supplies") || userInput.includes("pack")) {
                return disasterResponses["emergency kit"];
            } else if (userInput.includes("safe") || userInput.includes("safety") || userInput.includes("protect")) {
                return disasterResponses["safety"];
            } else if (userInput.includes("disaster") || userInput.includes("emergency") || userInput.includes("crisis")) {
                return disasterResponses["active disasters"];
            }
            
            // Default response if no matches
            return disasterResponses["default"];
        }
    
        // Enhanced chatbot functionality
        function toggleChatbot() {
            const panel = document.getElementById('chatbotPanel');
            if (panel.style.display === 'block') {
                panel.style.display = 'none';
            } else {
                panel.style.display = 'block';
                document.getElementById('chatInput').focus();
            }
        }
    
        // Function to add a message to the chat
        function addMessage(message, sender) {
            const chatBody = document.getElementById('chatbotBody');
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.style.backgroundColor = '#f0f0f0';
                messageDiv.style.marginLeft = '20%';
                messageDiv.innerHTML = `<strong>You:</strong> ${message}`;
            } else {
                messageDiv.style.backgroundColor = '#e6f2ff';
                messageDiv.innerHTML = `<strong>Disaster Assistant:</strong> ${message}`;
            }
            
            messageDiv.style.padding = '10px';
            messageDiv.style.borderRadius = '10px';
            messageDiv.style.marginBottom = '10px';
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }
    
        // Function to show typing indicator
        function showTypingIndicator() {
            const chatBody = document.getElementById('chatbotBody');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.style.backgroundColor = '#e6f2ff';
            typingDiv.style.padding = '10px';
            typingDiv.style.borderRadius = '10px';
            typingDiv.style.marginBottom = '10px';
            typingDiv.innerHTML = `<strong>Disaster Assistant:</strong> <span class="dot">.</span><span class="dot">.</span><span class="dot">.</span>`;
            
            chatBody.appendChild(typingDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }
    
        // Function to remove typing indicator
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }
    
        // Function to send a message
        function sendMessage() {
            const chatInput = document.getElementById('chatInput');
            const message = chatInput.value.trim();
            
            if (message === '') return;
            
            // Add user message to chat
            addMessage(message, 'user');
            
            // Clear input field
            chatInput.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate processing time
            setTimeout(() => {
                // Remove typing indicator
                removeTypingIndicator();
                
                // Get response from knowledge base
                const response = findBestResponse(message);
                
                // Add bot response to chat
                addMessage(response, 'bot');
            }, 1000);
        }
    
        // Add event listener for Enter key
        document.getElementById('chatInput').addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        });
    
        // Function to get user's location for more precise assistance
        function getUserLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        // Store coordinates for emergency services
                        const latitude = position.coords.latitude;
                        const longitude = position.coords.longitude;
                        
                        // Could be used to find nearest evacuation centers
                        console.log(`User location: ${latitude}, ${longitude}`);
                    },
                    (error) => {
                        console.error("Error getting location:", error.message);
                    }
                );
            }
        }
    
        // Initialize the chatbot when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial display state for chatbot panel
            document.getElementById('chatbotPanel').style.display = 'none';
            
            // Try to get user location for emergency assistance
            getUserLocation();
        });
    
        // SOS button enhanced functionality
        document.querySelector('.sos-button').addEventListener('click', function() {
            // Get user location if available
            getUserLocation();
            
            // Additional emergency actions could be implemented here
            // Such as sending location to emergency services API
        });
    </script>
</body>
</html>